Da Cambiare il nomeuser e nome cartella nei percorsi!!!!!

sudo nano /etc/systemd/system/audioPlayer

aggiungi:

[Unit]
Description=Servizio MQTT Audio Client
After=network-online.target
Wants=network-online.target

[Service]
# Attendi che il dispositivo abbia un IP sulla rete e il broker sia raggiungibile
ExecStartPre=/bin/bash -c 'until ip route | grep -q "10.42.0"; do echo "In attesa della rete..."; sleep 2; done'
ExecStartPre=/bin/bash -c 'until ping -c1 10.42.0.1 &>/dev/null; do echo "In attesa del broker..."; sleep 2; done'

ExecStart=/home/villasilvia/Desktop/condivisa/audioPlayer/target/distribution/start.sh
WorkingDirectory=/home/villasilvia/Desktop/condivisa/audioPlayer
User=villasilvia
Restart=always

[Install]
WantedBy=multi-user.target



sudo systemctl daemon-reload
sudo systemctl enable audioPlayer.service
sudo systemctl start audioPlayer.service

